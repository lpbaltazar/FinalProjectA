CREATE DATABASE events_db;

CREATE USER 'rigi'@'localhost' IDENTIFIED BY 'pwd@rigi';
GRANT ALL ON events_db.* TO 'rigi'@'localhost';

USE events_db;

DROP TABLE IF EXISTS events_data;
CREATE TABLE events_data (
    USERID VARCHAR(256),
    PRIMARY_FINGERPRINT VARCHAR(256),
    USER_BROWSER VARCHAR(128) DEFAULT NULL,
    USER_BROWSER_VERSION VARCHAR(128) DEFAULT NULL,
    USER_OS VARCHAR(128) DEFAULT NULL,
    USER_OS_VERSION VARCHAR(128) DEFAULT NULL,
    USER_HOSTADDRESS VARCHAR(128) DEFAULT NULL,
    SESSIONID VARCHAR(256),
    ORIGINAL_VIDEO_CONTENT_ID VARCHAR(256) DEFAULT NULL,
    VIDEO_CONTENT_ID VARCHAR(20) DEFAULT NULL,
    VIDEO_CONTENT_TITLE VARCHAR(128) DEFAULT NULL,
    ORIGINAL_VIDEO_CATEGORY_ID VARCHAR(256) DEFAULT NULL,
    VIDEO_CATEGORY_ID VARCHAR(20) DEFAULT NULL,
    VIDEO_CATEGORY_TITLE VARCHAR(128) DEFAULT NULL,
    VIDEO_TYPE VARCHAR(64) DEFAULT NULL,
    VIDEO_DURATION FLOAT DEFAULT NULL,
    SESSION_STARTDT DATETIME DEFAULT NULL,
    SESSION_ENDDT DATETIME DEFAULT NULL,
    CLICK_COUNT INT DEFAULT NULL,
    ADPLAY_COUNT INT DEFAULT NULL,
    PLAY_COUNT INT DEFAULT NULL,
    PAUSE_COUNT INT DEFAULT NULL,
    RESUME_COUNT INT DEFAULT NULL,
    AB_FLAG INT DEFAULT NULL,
    SEEK_COUNT INT DEFAULT NULL,
    BUFFER_COUNT INT DEFAULT NULL,
    TOTAL_BUFFER_TIME FLOAT DEFAULT NULL,
    MAX_BUFFER_TIME FLOAT DEFAULT NULL,
    USR_TOT_WATCHING_DUR FLOAT DEFAULT NULL,
    USR_ACT_TOT_WATCHING_DUR FLOAT DEFAULT NULL,
    ISP_PROVIDER VARCHAR(20) DEFAULT NULL,
    ISMOBILE INT DEFAULT NULL,
    MOBILE_DEVICE VARCHAR(128) DEFAULT NULL,
    ISP_TAG VARCHAR(256) DEFAULT NULL,
    MOBILETYPE VARCHAR(128) DEFAULT NULL,
    APP_TAG INT DEFAULT NULL,
    THREE_G_TAG VARCHAR(128) DEFAULT NULL,
    CONTENT_TYPE VARCHAR(128) DEFAULT NULL,
    IPCOUNTRY VARCHAR(32) DEFAULT NULL,
    SUBDIVISION_1 VARCHAR(128) DEFAULT NULL,
    SUBDIVISION_2 VARCHAR(128) DEFAULT NULL,
    IPCITY VARCHAR(128) DEFAULT NULL,
    APP_VERSION VARCHAR(128) DEFAULT NULL
);